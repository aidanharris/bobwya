Title: Multislot Wine Q/A+bug fixes
Author: Robert Walker <bob.mt.wya@gmail.com>
Display-If-Installed: app-eselect/eselect-wine
Content-Type: text/plain
Posted: 2018-02-06
Revision: 1
News-Item-Format: 1.0

Unfortunately previous versions of the eselect-wine module, for
managing multislot Wine versions, were buggy around the handling of
file extensions. In addition fixes have been made to the binary
wrappers that the app-emulation/wine-staging + app-emulation/wine-vanilla
packages create. These bugs manifested as errors validating the symbolic
links created to set/unset a particular version of multislotted Wine as active
and during registration/deregistration.

Now all symbolic links (created by eselect-wine) and file wrappers (part of the
wine-staging and wine-vanilla packages) are consistent, of the form:

  <base>[-variant][.<extension>]

Previously the extension element was interleaved with the variant name in a random fashion
- leading to some obscure error messages!

There may be some invalid, dangling symbolic links left by these changes of the form:

  /usr/lib64/libwine.so-vanilla.1.0

These can be removed by using the following commands:

  eselect wine unset --all
  find "${EROOT%/}/usr/lib{32,64}" -type l \( -name "libwine*" -a \( -name "*staging*" -o -name "*vanilla*" \) \) -print0 \
		| xargs -0 rm -f

Invalid wrappers will removed when you update the app-emulation/wine-staging +
app-emulation/wine-vanilla packages you have installed (forced by revision
bumps to all standard versions - live 9999 ebuilds should also be rebuilt).

